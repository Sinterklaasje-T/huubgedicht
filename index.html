<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hackerscherm Gedicht</title>

<style>
    :root {
        --green: #00ff00;
        --red: #ff0033;
        --bg: #000;
        --font: "Courier New", monospace;
    }

    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: var(--bg);
        font-family: var(--font);
        color: var(--green);
        overflow-y: auto;
        overflow-x: hidden;
        padding-bottom: 120vh; /* zorgt dat er altijd ruimte is om naar midden te scrollen */
    }

    .matrix {
        position: fixed;
        top: 0;
        height: 100vh;
        width: 22%;
        pointer-events: none;
        z-index: 0;
    }
    #matrixLeft { left: 0; }
    #matrixRight { right: 0; }

    /* MOB-B — matrix smaller op mobiel */
    @media (max-width: 600px) {
        .matrix { width: 11%; }
        #content { width: 78% !important; }
    }

    #content {
        position: relative;
        width: 56%;
        margin: 0 auto;
        padding-top: 60px;
        font-size: 20px;
        line-height: 1.3;
        z-index: 3;
        white-space: pre-wrap;
    }

    .line { margin-bottom: 14px; }

    /* Glitch overlay */
    #glitchOverlay {
        position: fixed;
        inset: 0;
        background: rgba(255,0,0,0.08);
        mix-blend-mode: screen;
        filter: blur(0);
        opacity: 0;
        pointer-events: none;
        z-index: 10;
        transition: opacity 1.8s ease-out, filter 1.8s ease-out;
    }

    .glitching {
        animation: glitchshift 0.17s infinite;
    }
    @keyframes glitchshift {
        0% { transform: translate(0,0); }
        33% { transform: translate(1px,-1px); }
        66% { transform: translate(-1px,1px); }
        100% { transform: translate(0,0); }
    }

    /* STARTUP overlay */
    #startup {
        position: fixed;
        inset: 0;
        background: var(--bg);
        z-index: 20;
        color: var(--green);
        padding: 35px;
        font-size: 18px;
    }

    /* SIGNING OUT — decode letters */
    #endScreen {
        position: fixed;
        inset: 0;
        background: black;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 42px;
        opacity: 0;
        color: var(--green);
        z-index: 60;
        transition: opacity 1.3s ease-in;
        pointer-events: none;
        letter-spacing: 2px;
    }

</style>
</head>
<body>

<canvas id="matrixLeft" class="matrix"></canvas>
<canvas id="matrixRight" class="matrix"></canvas>

<div id="glitchOverlay"></div>

<div id="startup"><pre id="startupText"></pre></div>

<div id="content" style="display:none;"></div>

<div id="endScreen">HACKERPIET — SIGNING OUT…</div>

<script>
/* =========================
   HELPERS / DOM refs
========================= */
const content = document.getElementById("content");
const startup = document.getElementById("startup");
const startupText = document.getElementById("startupText");

/* =========================
   STARTUP ANIMATIE
========================= */
const startupLines = [
    "BOOTING SYSTEM...",
    "",
    "Initializing encryption engine.........OK",
    "Scanning subnet........................OK",
    "Loading poetry-module v2.1............OK",
    "",
    "READY."
];

let sI = 0;
function showStartup() {
    if (sI < startupLines.length) {
        startupText.textContent += startupLines[sI] + "\n";
        sI++;
        setTimeout(showStartup, 330 + Math.random()*260);
    } else {
        setTimeout(() => {
            startup.style.transition = "opacity .9s";
            startup.style.opacity = 0;
            setTimeout(() => startup.remove(), 800);
            content.style.display = "block";
            // ensure focus so space works on desktop with keyboard
            try { document.body.focus(); } catch(e){}
        }, 600);
    }
}
showStartup();

/* =========================
   EFFECTEN
========================= */
let russianMode = false;
let glitchTimeout = null;

function enableRussianMode(){ russianMode = true; }
function disableRussianMode(){ russianMode = false; }

function enableGlitchEffect(){
    const overlay = document.getElementById("glitchOverlay");
    overlay.style.opacity = 0.75;
    overlay.style.filter = "blur(2px)";
    document.body.classList.add("glitching");

    clearTimeout(glitchTimeout);
    glitchTimeout = setTimeout(()=>{
        overlay.style.opacity = 0;
        overlay.style.filter = "blur(0)";
        document.body.classList.remove("glitching");
    }, 5000);
}

/* =========================
   ENDING (SO-C with END-D behavior)
   - show endScreen text
   - falling letters animation
   - briefly return green matrix then fade to black
========================= */
function triggerEnding(){
    const end = document.getElementById("endScreen");
    end.style.opacity = 1;

    // prepare spans for each char
    const text = end.textContent.split("");
    end.textContent = "";
    const spans = [];
    text.forEach(char => {
        const s = document.createElement("span");
        s.textContent = char;
        s.style.display = "inline-block";
        s.style.transform = "translateY(-10px)";
        s.style.opacity = "1";
        end.appendChild(s);
        spans.push(s);
    });

    // sequentially drop letters
    let idx = 0;
    function fall(){
        if(idx < spans.length){
            const sp = spans[idx];
            sp.style.transition = "transform 0.9s ease-out, opacity 0.9s";
            sp.style.transform = "translateY(140px) rotate(6deg)";
            sp.style.opacity = "0";
            idx++;
            setTimeout(fall, 70);
        } else {
            // after letters fallen, bring matrix briefly to green calm state and then fade whole page to black
            russianMode = false; // switch to green
            document.body.classList.remove("glitching");
            // Wait a bit so user sees brief green calm
            setTimeout(()=>{
                // fade content + matrix to black
                document.body.style.transition = "opacity 2s ease-in";
                document.body.style.opacity = 0;
            }, 1800);
        }
    }

    // start the fall after a short delay so endScreen visible first
    setTimeout(fall, 600);
}

/* =========================
   MATRIX CANVAS
========================= */
function initMatrixCanvas(canvas) {
    const ctx = canvas.getContext("2d");
    const greenChars = "01";
    const rusChars = "ЖЦФЫШЩЭЮЯБГДЁЗЛПЧЪЬХ";
    const fontSize = 18;
    let columns = 0, drops = [];

    function resize(){
        // size in actual pixels
        const ratio = window.devicePixelRatio || 1;
        canvas.width = Math.floor(canvas.clientWidth * ratio);
        canvas.height = Math.floor(canvas.clientHeight * ratio);
        ctx.setTransform(ratio,0,0,ratio,0,0);
        columns = Math.floor(canvas.clientWidth / fontSize) || 1;
        drops = Array(columns).fill(1);
    }
    resize();
    window.addEventListener("resize", resize);

    function draw(){
        ctx.fillStyle = "rgba(0,0,0,0.07)";
        ctx.fillRect(0,0,canvas.clientWidth, canvas.clientHeight);

        drops.forEach((y,i) => {
            let char, color;
            if(russianMode){
                char = rusChars.charAt(Math.floor(Math.random()*rusChars.length));
                color = "#ff0033";
            } else {
                char = greenChars.charAt(Math.floor(Math.random()*greenChars.length));
                color = "#00ff00";
            }

            ctx.fillStyle = color;
            ctx.font = fontSize + "px monospace";
            ctx.fillText(char, i * fontSize, y * fontSize);

            // speed control: only speed up red during glitch; russian overall slower
            if (window.innerWidth < 500) {
                if (russianMode && document.body.classList.contains("glitching")) drops[i] += 2.1;
                else if (russianMode) drops[i] += 0.55;
                else drops[i] += 0.85;
            } else if (window.innerWidth < 900) {
                if (russianMode && document.body.classList.contains("glitching")) drops[i] += 2.3;
                else if (russianMode) drops[i] += 0.65;
                else drops[i] += 0.93;
            } else {
                if (russianMode && document.body.classList.contains("glitching")) drops[i] += 2.5;
                else if (russianMode) drops[i] += 0.7;
                else drops[i] += 1;
            }

            if (y * fontSize > canvas.clientHeight && Math.random() > 0.975) drops[i] = 0;
        });
    }

    // adaptive frame speed
    let speed = 50;
    if (window.innerWidth < 500) speed = 85;
    else if (window.innerWidth < 900) speed = 65;
    setInterval(draw, speed);
}

/* start both matrices */
initMatrixCanvas(document.getElementById("matrixLeft"));
initMatrixCanvas(document.getElementById("matrixRight"));

/* =========================
   GEDICHTTEKST (exact zoals opgegeven)
   - witregels zijn echt leeg
========================= */
const poem = `
Dag Sint, goed dat u dit leest, ik heb mijn uiterste best gedaan, 
Om wat te vinden over Huub van Rijn, en het resultaat rijmend te verslaan.
Mijn conclusies zijn schokkend, ik bereid u vast voor,
De AIVD is ingelicht, want ik ben iets op het spoor.

Ik begon op het dark web, dat tegenwoordig trouwens roetveeg-web moet heten,
Het was een lange zoektocht, maar ik kwam het volgende te weten.
Huubs digitale afwezigheid heeft alles met zijn werk te maken,
Hij zit bij de politie, waar hij tegen betaling zijn hersens laat kraken.
Zijn locatie heb ik gepinpoint op een geheum gebouw, ergens tussen Driebergen en Zeist,
Thuiswerken kennen ze daar niet, het lijkt alsof die arme Huub elke dag heen en weer reist.
En wat hij er precies doet, echt, ik heb dit tien keer moeten checken,
Het is bizar, ze noemen die onzin ETHISCH HACKEN.

Hoe ga ik dit uitleggen, Sint, zodat een oude man als u het snapt,
Het is alsof je om de beveiliging van de Kruidvat te checken, een zak vol snoepjes gapt.
Het is je gedicht met ChatGPT schrijven om te zien of iemand het doorheeft,
Het is expres je portemonnee laten vallen om te zien of een ander hem teruggeeft.
Dat is toch cybercrime, hoor ik u denken? Dat is toch hartstikke strafbaar?
Helemaal mee eens! Maar Huub krijgt ervoor betaald, blijkbaar.

Huubs digitale agenda inzien was een fluitje van een cent,
Daar zag ik dat hij een reisje naar Madeira had gepland.
Voor het eerst heeft hij er gedoken, onder lichte dwang,
Hij appte dat hij genoot, maar volgens mij was hij vooral bang.
Toen zag ik iets vreemds: in februari gaat hij weer die kant op, naar een Canarisch Eiland!
Dat moest een bug in het systeem zijn, dat kon niet waar zijn, want,
Huub is normaal gesproken niet zo’n vakantieganger,
Een weekendje hier en daar, maar echt niet langer.
Hoe kan het dan dat hij twee keer in een halfjaar dezelfde route reist?
Ik wilde Schiphol al bellen, deze bolletjesslikker moest op de zwarte lijst.
Toch bleek er een plausibele verklaring, hij valt met zijn neus in de boter,
Mag mee met opa en oma Daanen, de zusjes en hun kleine koters.

Wat een geluksvogel, dacht ik opgelucht, nog geen jaar in de familie en dan al all-inclusive…
Maar toen stuitte ik plots op een red flag in zijn Google Searches: KATTENGIF!
Huub zoekt naar manieren om een huisdier uit de weg te ruimen, hier is iets niet pluis.
Hij wil van zijn laatste concurrent op liefdesgebied af: poes Muis.
Die ligt nog vaker in Farah’s bed dan hijzelf, daar wil Huub blijkbaar wat aan doen,
Mocht u nog bij Muis langsgaan, Sint, doe een kogelwerend Batmanmasker in zijn schoen.

Zo ziet u, Huubs digitale profiel gaf nogal wat reden tot achterdocht,
Hij kreeg het voordeel van de twijfel, tot ik hem in de database van de ANWB opzocht,
Daar zag ik in wat voor patserbak hij naar Mol is gereden,
Hij had het lef om met zijn Vette Cor het vakantiepark te betreden.
Het lijkt erop dat Huub de Mol-etiketten niet kent,
Indruk maken met zo’n rode bolide, dat doe je niet op je eerste weekend!
Een feut komt gewoon netjes met de Aygo, het liefst in een saaie kleur,
Maar eerlijk is eerlijk, zijn bolide heeft wel een spacey interieur.

Daarna ben ik Huubs geldstromen gaan checken, want hoe betaalt hij die slee? Van welk loon?
Toen bleek hij toch geen drugsdealer, maar muzikant, een tenor saxofoon.
Huub speelt wat je maar wilt, van rock tot indie, van soul tot jazz.
Maar ik ben toch even in die bandnaam gedoken, want what the fuck is een Aeris Brass?

Is het een shout-out naar het Duitse Aeris, dat ergonomische stoelen bouwt?
Of naar STUDIO AERIS, een plek in Utrecht waar je je benen om een paal heen vouwt?
Ik bleef maar Googlen op die naam, en er zat heel wat verdachts tussen,
Toen viel eindelijk het kwartje, Aeris is een codewoord voor de Russen.

Huubs bekendste nummer is ‘Proper Hired Guns’, dat is toch ook verdacht?!
Ik klink nu misschien als een complotgekkie, Sint, maar wacht,
Weet u nog, die drones die laatst bij Eindhoven Airport zijn gespot?
Nou wil het toeval, een vreemde speling van het lot,
Dat Huub precies in die week een drone bouwde, dat heeft hij zichzelf zogenaamd geleerd,
Is het dan zo’n gek idee dat hij voor Moskou spioneert?

Als je het doorhebt, zie je dat alles op banden met het Kremlin wijst,
Dacht hij nou echt weg te komen met zo’n rare verlanglijst?
Vreemd hè, dat hij een telescoop met superzoom vraagt, die brave knul,
Daarmee wil hij vast naar de sterren turen, niet naar de militaire bewegingen in Volkel.

Maar of Huub nou een geheim agent is of niet, het is hem allemaal vergeven,
Voor Hackerpiet kan hij geen fout doen, door in de mooiste stad van Nederland te leven.
Bovendien zie ik hem vaak verliefd naar Kane, Lucy en Puck kijken,
Het kost hem de grootste moeite om niet aan Farah’s rammelende eierstokken te bezwijken.
U ziet ook wel, Sint, die Huub is gewoon een lief jong, een fijne factor in Farah’s leven, 
Misschien moeten we hem dat spionnencadeau maar gewoon geven.

Dat is dan ook mijn laatste oordeel: Huub is gewoon een hartstikke lieve vent,
Wat maakt het uit dat hij wat mannen in Moskou kent.
Ik hoop hem nog vele jaren in Winssen, Puiflijk, Wijchen of Kampen te zien,
Met een beetje geluk voor de volgende dichter zit hij komend jaar wél op TikTok, of Twitter misschien.

Liefs,
Hackerpiet
`.trim().split("\n");

/* =========================
   TYPE + AUTO SCROLL
========================= */

let lineIndex = 0;
let isTyping = false;

function scrollOffset(target){
    const elementTop = target.getBoundingClientRect().top + window.pageYOffset;
    const desiredY = elementTop - (window.innerHeight / 2) + (window.innerHeight * 0.20);
    window.scrollTo({ top: desiredY, behavior: "smooth" });
}

function startTypingLine(text){
    isTyping = true;

    // witregel support
    if(text.trim() === ""){
        const div = document.createElement("div");
        div.className="line";
        div.innerHTML="&nbsp;";
        content.appendChild(div);
        scrollOffset(div);
        lineIndex++;
        isTyping=false;
        return;
    }

    const div = document.createElement("div");
    div.className="line";
    content.appendChild(div);

    // triggers voor speciale effecten
    if(text.includes("Aeris is een codewoord voor de Russen")) enableRussianMode();
    if(text.includes("Is het dan zo’n gek idee dat hij voor Moskou spioneert")) enableGlitchEffect();

    let i = 0;
    function type(){
        if(i < text.length){
            div.textContent += text.charAt(i);
            // scroll tijdens typen zodat de regel in beeld blijft (iets onder midden)
            scrollOffset(div);
            i++;
            setTimeout(type, 14);
        } else {
            isTyping = false;
            lineIndex++;
            // als we net de allerlaatste regel hebben getypt -> trigger ending
            if (lineIndex >= poem.length) {
                // korte pauze voordat ending start
                setTimeout(() => {
                    // bring glitching off and ensure russianMode off so we see green briefly
                    document.body.classList.remove("glitching");
                    russianMode = true; // keep red until ending starts, this gives dramatic feel
                    // slight delay then trigger ending
                    setTimeout(triggerEnding, 1200);
                }, 700);
            }
        }
    }
    type();
}

/* interaction: space or tap */
document.addEventListener("keydown", e=>{
    if (e.code === "Space") {
        e.preventDefault();
        if (!isTyping && lineIndex < poem.length) startTypingLine(poem[lineIndex]);
    }
});
document.addEventListener("click", ()=>{
    if (!isTyping && lineIndex < poem.length) startTypingLine(poem[lineIndex]);
});
</script>

</body>
</html>

